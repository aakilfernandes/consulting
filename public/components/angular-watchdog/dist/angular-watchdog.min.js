!function(){function a(a){var b={endpoint:null,missingEndpointWarning:"watchdog endpoint is missing, not logged to server",isGlobal:!1,stacktraces:{},ajaxCalls:[]};return b.log=function(c){var d=f.computeStackTrace(c),e=b.getHash(JSON.stringify(d));if(!b.stacktraces[e]){if(b.stacktraces[e]=d,!b.endpoint)return void a.warn(b.missingEndpointWarning);var g=b.callAjax("POST",b.endpoint,{dataJson:JSON.stringify(d)});return b.ajaxCalls.push(g),d}},b.getHash=function(a){var b,c,d,e=0;if(0==a.length)return e;for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e},b.callAjax=function(a,b,d){var e=c(d),f=new XMLHttpRequest;return f.open(a,b,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(e),f},this.options&&angular.extend(b,this.options),b.isGlobal&&(window.watchdog=b),b}function b(a){a.decorator("$exceptionHandler",["$delegate","watchdog",function(a,b){return function(){a.apply(a,arguments),b.log.apply(a,arguments)}}])}function c(a){var b="";for(var c in a){var d=a[c];b+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&"}return b.length>0&&(b=b.substring(0,b.length-1)),b}function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function e(a){return"undefined"==typeof a}angular.module("watchdog",[]).config(b).factory("watchdog",a);a.$inject=["$log"],b.$inject=["$provide"];var f={},g=(window.TraceKit,[].slice,"?");f.computeStackTrace=function(){function a(a){if(!f.remoteFetching)return"";try{var b=function(){try{return new window.XMLHttpRequest}catch(a){return new window.ActiveXObject("Microsoft.XMLHTTP")}},c=b();return c.open("GET",a,!1),c.send(""),c.responseText}catch(d){return""}}function b(b){if(!d(v,b)){var c="";-1!==b.indexOf(document.domain)&&(c=a(b)),v[b]=c?c.split("\n"):[]}return v[b]}function c(a,c){var d,f=/function ([^(]*)\(([^)]*)\)/,h=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",j=10,k=b(a);if(!k.length)return g;for(var l=0;j>l;++l)if(i=k[c-l]+i,!e(i)){if(d=h.exec(i))return d[1];if(d=f.exec(i))return d[1]}return g}function h(a,c){var d=b(a);if(!d.length)return null;var g=[],h=Math.floor(f.linesOfContext/2),i=h+f.linesOfContext%2,j=Math.max(0,c-h-1),k=Math.min(d.length,c+i-1);c-=1;for(var l=j;k>l;++l)e(d[l])||g.push(d[l]);return g.length>0?g:null}function i(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function j(a){return i(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function k(a,c){for(var d,e,f=0,g=c.length;g>f;++f)if((d=b(c[f])).length&&(d=d.join("\n"),e=a.exec(d)))return{url:c[f],line:d.substring(0,e.index).split("\n").length,column:e.index-d.lastIndexOf("\n",e.index)-1};return null}function l(a,c,d){var e,f=b(c),g=new RegExp("\\b"+i(a)+"\\b");return d-=1,f&&f.length>d&&(e=g.exec(f[d]))?e.index:null}function m(a){for(var b,c,d,e,f=[window.location.href],g=document.getElementsByTagName("script"),h=""+a,l=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,m=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,n=0;n<g.length;++n){var o=g[n];o.src&&f.push(o.src)}if(d=l.exec(h)){var p=d[1]?"\\s+"+d[1]:"",q=d[2].split(",").join("\\s*,\\s*");b=i(d[3]).replace(/;$/,";?"),c=new RegExp("function"+p+"\\s*\\(\\s*"+q+"\\s*\\)\\s*{\\s*"+b+"\\s*}")}else c=new RegExp(i(h).replace(/\s+/g,"\\s+"));if(e=k(c,f))return e;if(d=m.exec(h)){var r=d[1];if(b=j(d[2]),c=new RegExp("on"+r+"=[\\'\"]\\s*"+b+"\\s*[\\'\"]","i"),e=k(c,f[0]))return e;if(c=new RegExp(b),e=k(c,f))return e}return null}function n(a){if(!a.stack)return null;for(var b,d,e=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,i=a.stack.split("\n"),j=[],k=/^(.*) is undefined$/.exec(a.message),m=0,n=i.length;n>m;++m){if(b=f.exec(i[m]))d={url:b[3],func:b[1]||g,args:b[2]?b[2].split(","):"",line:+b[4],column:b[5]?+b[5]:null};else{if(!(b=e.exec(i[m])))continue;d={url:b[2],func:b[1]||g,line:+b[3],column:b[4]?+b[4]:null}}!d.func&&d.line&&(d.func=c(d.url,d.line)),d.line&&(d.context=h(d.url,d.line)),j.push(d)}return j[0]&&j[0].line&&!j[0].column&&k&&(j[0].column=l(k[1],j[0].url,j[0].line)),j.length?{mode:"stack",name:a.name,message:a.message,url:document.location.href,stack:j,useragent:navigator.userAgent}:null}function o(a){for(var b,d=a.stacktrace,e=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,f=d.split("\n"),g=[],i=0,j=f.length;j>i;i+=2)if(b=e.exec(f[i])){var k={line:+b[1],column:+b[2],func:b[3]||b[4],args:b[5]?b[5].split(","):[],url:b[6]};if(!k.func&&k.line&&(k.func=c(k.url,k.line)),k.line)try{k.context=h(k.url,k.line)}catch(l){}k.context||(k.context=[f[i+1]]),g.push(k)}return g.length?{mode:"stacktrace",name:a.name,message:a.message,url:document.location.href,stack:g,useragent:navigator.userAgent}:null}function p(a){var e=a.message.split("\n");if(e.length<4)return null;var f,g,i,l,m=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,n=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,p=[],q=document.getElementsByTagName("script"),r=[];for(g in q)d(q,g)&&!q[g].src&&r.push(q[g]);for(g=2,i=e.length;i>g;g+=2){var s=null;if(f=m.exec(e[g]))s={url:f[2],func:f[3],line:+f[1]};else if(f=n.exec(e[g])){s={url:f[3],func:f[4]};var t=+f[1],u=r[f[2]-1];if(u&&(l=b(s.url))){l=l.join("\n");var v=l.indexOf(u.innerText);v>=0&&(s.line=t+l.substring(0,v).split("\n").length)}}else if(f=o.exec(e[g])){var w=window.location.href.replace(/#.*$/,""),x=f[1],y=new RegExp(j(e[g+1]));l=k(y,[w]),s={url:w,line:l?l.line:x,func:""}}if(s){s.func||(s.func=c(s.url,s.line));var z=h(s.url,s.line),A=z?z[Math.floor(z.length/2)]:null;s.context=z&&A.replace(/^\s*/,"")===e[g+1].replace(/^\s*/,"")?z:[e[g+1]],p.push(s)}}return p.length?{mode:"multiline",name:a.name,message:e[0],url:document.location.href,stack:p,useragent:navigator.userAgent}:null}function q(a,b,d,e){var f={url:b,line:d};if(f.url&&f.line){a.incomplete=!1,f.func||(f.func=c(f.url,f.line)),f.context||(f.context=h(f.url,f.line));var g=/ '([^']+)' /.exec(e);if(g&&(f.column=l(g[1],f.url,f.line)),a.stack.length>0&&a.stack[0].url===f.url){if(a.stack[0].line===f.line)return!1;if(!a.stack[0].line&&a.stack[0].func===f.func)return a.stack[0].line=f.line,a.stack[0].context=f.context,!1}return a.stack.unshift(f),a.partial=!0,!0}return a.incomplete=!0,!1}function r(a,b){for(var d,e,h,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,j=[],k={},n=!1,o=r.caller;o&&!n;o=o.caller)if(o!==s&&o!==f.report){if(e={url:null,func:g,line:null,column:null},o.name?e.func=o.name:(d=i.exec(o.toString()))&&(e.func=d[1]),h=m(o)){e.url=h.url,e.line=h.line,e.func===g&&(e.func=c(e.url,e.line));var p=/ '([^']+)' /.exec(a.message||a.description);p&&(e.column=l(p[1],h.url,h.line))}k[""+o]?n=!0:k[""+o]=!0,j.push(e)}b&&j.splice(0,b);var t={mode:"callers",name:a.name,message:a.message,url:document.location.href,stack:j,useragent:navigator.userAgent};return q(t,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),t}function s(a,b){var c=null;b=null==b?0:+b;try{if(c=o(a))return c}catch(d){if(u)throw d}try{if(c=n(a))return c}catch(d){if(u)throw d}try{if(c=p(a))return c}catch(d){if(u)throw d}try{if(c=r(a,b+1))return c}catch(d){if(u)throw d}return{mode:"failed"}}function t(a){a=(null==a?0:+a)+1;try{throw new Error}catch(b){return s(b,a+1)}}var u=!1,v={};return s.augmentStackTraceWithInitialElement=q,s.guessFunctionName=c,s.gatherContext=h,s.ofCaller=t,s}()}();
//# sourceMappingURL=angular-watchdog.min.js.map